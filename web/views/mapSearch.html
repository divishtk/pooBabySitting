<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Poo BabySitting</title>
        <link rel="icon" href="../resources/images/baby-solid.svg" sizes="any" type="image/svg+xml">
        <!--<link rel="icon" href="icon_path" type="image/icon type">-->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../resources/css/bootstrap.min.css"/>
        <link href="../resources/css/commonCss.css" rel="stylesheet" type="text/css"/>
        <link href="../resources/css/notification.css" rel="stylesheet" type="text/css"/>
        <link rel='stylesheet' type='text/css' href='https://api.tomtom.com/maps-sdk-for-web/cdn/5.x/5.64.0/maps/maps.css'>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="../resources/js/notificatoins.js" type="text/javascript"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" ></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.0.2/dist/sweetalert2.all.min.js"></script>
        <!-- Font Awesome JS -->
        <!--        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"></script>
        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"></script>-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"/>
        <link href="https://fonts.googleapis.com/css2?family=Grandstander:wght@300&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Baloo+Tammudu+2:wght@400;500&display=swap" rel="stylesheet">
    </head>
    <body>
        <div class="fluid-container">
            <header class="shadow">
                <nav class="navbar navbar-light bg-white">
                    <a class="navbar-brand customIcon"> Poo-<i class="fas fa-baby"></i>-Sitting</a>
                    <div class="d-flex flex-row-reverse bd-highlight">
                        <div class="p-2 bd-highlight cursorOnHover"><a href="/pooBabySitting/"><i class="fas fa-power-off"></i></a></div>
                        <div class="p-2 bd-highlight cursorOnHover">
                            <div class="dropdown">
                                <a id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
                                    <i class="fa fa-bell"></i>
                                </a>

                                <ul class="dropdown-menu notifications" role="menu" aria-labelledby="dLabel">
                                    <div class="notification-heading">
                                        <h4 class="menu-title">Notifications</h4>
                                        <h4 class="menu-title pull-right text-info fs-14">
                                            <a href="notifications.html">View all</a>
                                            <i class="glyphicon glyphicon-circle-arrow-right"></i>
                                        </h4>
                                    </div>
                                    <li class="divider"></li>
                                    <div class="notifications-wrapper">
                                        <a class="content" href="#">
                                            <div class="notification-item">
                                                <p class="h6 text-dark">Offer Sent to Sarah  <i class="float-right">a day ago</i></p>
                                            </div>
                                        </a>
                                        <a class="content" href="#">
                                            <div class="notification-item">
                                                <p class="h6 text-dark">Offer Sent to Jane    <i class="float-right">2 day ago</i></p>
                                            </div>
                                        </a>
                                        <a class="content" href="#">
                                            <div class="notification-item">
                                                <p class="h6 text-dark">Offer Sent to annie   <i class="float-right">2 day ago</i></p>
                                            </div>
                                        </a>
                                    </div>
                                    <li class="divider"></li>
                                    <div class="notification-footer">
                                        <p class="h5 text-center">
                                            <a href="notifications.html">View all
                                                <i class="fas fa-arrow-right"></i>
                                            </a>
                                        </p>
                                    </div>
                                </ul>
                            </div>
                        </div>
                        <div class="p-2 bd-highlight cursorOnHover onHover"><a href="AboutUs.html">About</a></div>
                        <div class="p-2 bd-highlight cursorOnHover onHover"><a href="hireBy.html">Hire</a></div>
                        <div class="p-2 bd-highlight cursorOnHover onHover"><a href="home.html">Home</a></div>
                    </div>
                </nav>
            </header>
            <div class="container" style="overflow: hidden">
                <br>
                <br>
                <br>
                <div class="row">
                    <div class="col-8">
                        <!--map-->
                        <div class="card card-body h-100 p-2 ">
                            <p class="h4 font-weight-bold">Map</p>
                            <hr/>
                            <div id='map' class='map h-100 w-100'>
                                <div class='tt-overlay-panel -center js-message-box' hidden>
                                    <button class='tt-overlay-panel__close js-message-box-close'></button>
                                    <span class='tt-overlay-panel__content'></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <!--emp details-->
                        <div class="card mb-2">
                            <div class="card-body text-center">
                                <p class="h4 font-weight-bold">Find</p>
                                <hr/>
                                <div>
                                    <button class="btn btn-block btn-info">Locate Me</button>
                                    <button class="btn btn-block btn-info">Search area</button>
                                </div>
                            </div>
                        </div>
                        <div class="card mb-2">
                            <div class="card-body text-left">
                                <div>
                                    <img src="../resources/images/profile.svg" class="w-100 p-5 rounded-circle">
                                    <div class="pl-5 font-weight-bold">
                                        <div><label class="text-muted">Name:</label> Sarah</div>
                                        <div><label class="text-muted">Age:</label> 23</div>
                                        <div><label class="text-muted">Rating:</label> 4.5/5</div>
                                        <div><label class="text-muted">Location:</label> Mumbai, Maharashtra</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/5.x/5.64.0/maps/maps-web.min.js"></script>
        <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/5.x/5.64.0/services/services-web.min.js"></script>
        <script>
            $(document).ready(function () {

                var map = tt.map({
                    key: 'KaxplBgkUgHu83VZWQDP8sh2RlDGnoXS',
                    container: 'map',
                    center: [72.877426, 19.076090],
                    zoom: 10
                });
                map.addControl(new tt.FullscreenControl());
                map.addControl(new tt.NavigationControl());

                var markersOnTheMap = {};
                var eventListenersAdded = false;

                var points = [
                    {
                        coordinates: [72.846781, 19.058224],
                        properties: {
                            id: 1,
                            name: 'Sarah'
                        }
                    },
                    {
                        coordinates: [72.868424, 19.051085],
                        properties: {
                            id: 2,
                            name: 'Jane'
                        }
                    },
                    {
                        coordinates: [72.844376, 19.036156],
                        properties: {
                            id: 3,
                            name: 'June'
                        }
                    },
                    {
                        coordinates: [72.834756, 19.017980],
                        properties: {
                            id: 4,
                            name: 'Jerry'
                        }
                    },
                    {
                        coordinates: [0.05028587092436965, 51.596253489653066],
                        properties: {
                            id: 5,
                            name: 'Jimmy'
                        }
                    },
                    {
                        coordinates: [0.026939923659398346, 51.59412072198555],
                        properties: {
                            id: 6,
                            name: 'Checkpoint F'
                        }
                    },
                    {
                        coordinates: [0.04822593439902789, 51.58729519243778],
                        properties: {
                            id: 7,
                            name: 'Checkpoint G'
                        }
                    },
                    {
                        coordinates: [0.0598989080363026, 51.58516200412868],
                        properties: {
                            id: 8,
                            name: 'Checkpoint H'
                        }
                    },
                    {
                        coordinates: [-0.1484370070708394, 51.51355434335747],
                        properties: {
                            id: 9,
                            name: 'Checkpoint I'
                        }
                    },
                    {
                        coordinates: [-0.14116666086630403, 51.516268992925035],
                        properties: {
                            id: 10,
                            name: 'Checkpoint J'
                        }
                    },
                    {
                        coordinates: [-0.14698293783399663, 51.50857706561709],
                        properties: {
                            id: 11,
                            name: 'Checkpoint K'
                        }
                    },
                    {
                        coordinates: [-0.1389855570008649, 51.512649424212185],
                        properties: {
                            id: 12,
                            name: 'Checkpoint L'
                        }
                    },
                    {
                        coordinates: [-0.1484370070708394, 51.51581656256633],
                        properties: {
                            id: 13,
                            name: 'Checkpoint M'
                        }
                    },
                    {
                        coordinates: [-0.1542532840487354, 51.51400679618595],
                        properties: {
                            id: 14,
                            name: 'Checkpoint N'
                        }
                    },
                    {
                        coordinates: [-0.17024804570488072, 51.516268992925035],
                        properties: {
                            id: 15,
                            name: 'Checkpoint O'
                        }
                    },
                    {
                        coordinates: [-0.16006956101645642, 51.50857706561709],
                        properties: {
                            id: 16,
                            name: 'Checkpoint P'
                        }
                    }
                ];

                var geoJson = {
                    type: 'FeatureCollection',
                    features: points.map(function (point) {
                        return {
                            type: 'Feature',
                            geometry: {
                                type: 'Point',
                                coordinates: point.coordinates
                            },
                            properties: point.properties
                        };
                    })
                };
                function refreshMarkers() {
                    Object.keys(markersOnTheMap).forEach(function (id) {
                        markersOnTheMap[id].remove();
                        delete markersOnTheMap[id];
                    });

                    map.querySourceFeatures('point-source').forEach(function (feature) {
                        if (feature.properties && !feature.properties.cluster) {
                            var id = parseInt(feature.properties.id, 10);
                            if (!markersOnTheMap[id]) {
                                var newMarker = new tt.Marker().setLngLat(feature.geometry.coordinates);
                                newMarker.addTo(map);
                                newMarker.setPopup(new tt.Popup({offset: 30}).setText(feature.properties.name));
                                markersOnTheMap[id] = newMarker;
                            }
                        }
                    });
                }

                map.on('load', function () {
                    map.addSource('point-source', {
                        type: 'geojson',
                        data: geoJson,
                        cluster: true,
                        clusterMaxZoom: 14,
                        clusterRadius: 50
                    });

                    map.addLayer({
                        id: 'clusters',
                        type: 'circle',
                        source: 'point-source',
                        filter: ['has', 'point_count'],
                        paint: {
                            'circle-color': [
                                'step',
                                ['get', 'point_count'],
                                '#EC619F',
                                4,
                                '#008D8D',
                                7,
                                '#004B7F'
                            ],
                            'circle-radius': [
                                'step',
                                ['get', 'point_count'],
                                15,
                                4,
                                20,
                                7,
                                25
                            ],
                            'circle-stroke-width': 1,
                            'circle-stroke-color': 'white',
                            'circle-stroke-opacity': 1
                        }
                    });

                    map.addLayer({
                        id: 'cluster-count',
                        type: 'symbol',
                        source: 'point-source',
                        filter: ['has', 'point_count'],
                        layout: {
                            'text-field': '{point_count_abbreviated}',
                            'text-size': 16
                        },
                        paint: {
                            'text-color': 'white'
                        }
                    });

                    map.on('data', function (e) {
                        if (e.sourceId !== 'point-source' || !map.getSource('point-source').loaded()) {
                            return;
                        }

                        refreshMarkers();

                        if (!eventListenersAdded) {
                            map.on('move', refreshMarkers);
                            map.on('moveend', refreshMarkers);
                            eventListenersAdded = true;
                        }
                    });

                    map.on('click', 'clusters', function (e) {
                        var features = map.queryRenderedFeatures(e.point, {layers: ['clusters']});
                        var clusterId = features[0].properties.cluster_id;
                        map.getSource('point-source').getClusterExpansionZoom(clusterId, function (err, zoom) {
                            if (err) {
                                return;
                            }

                            map.easeTo({
                                center: features[0].geometry.coordinates,
                                zoom: zoom + 0.5
                            });
                        });
                    });

                    map.on('mouseenter', 'clusters', function () {
                        map.getCanvas().style.cursor = 'pointer';
                    });

                    map.on('mouseleave', 'clusters', function () {
                        map.getCanvas().style.cursor = '';
                    });
                });
            });
        </script>
    </body>
</html>